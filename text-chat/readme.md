# 命令集 Command
事实上，相同命令在不同状态下的行为是不同的，同时不同状态下支持的命令集也不尽相同。所以应该提供 Command 基类，为各个状态分别实现一套命令集。

状态，可以按是否登录区分，可以按不同的聊天室区分，也可以按其它情况区分（待扩展）。

## 调用接口
显然，需要会话信息

# 聊天室 Room
拥有两个角色
1. 管理聊天室内的会话、广播信息
2. 实现命令集

具体的聊天室对象，不采用多继承的方式，而是依次继承Command基类和Room基

为什么赋予聊天室实现命令集的角色？
1. 聊天的内容需要在聊天室内广播，而广播是聊天室的内在功能
2. 命令集可能因聊天室的不同而不同

## Todo 扩展
需要查询所有聊天室的在线用户


# 协议解析 Protocol
目前没有提取出这层接口。ChatSession只是简单地将收到的数据按空格划分，前部分是命令，后部分是参数，然后调用命令集的处理口

# 会话 ChatSession
维护单个客户 socket 连接，收发数据，管理命令集接口
1. 接收数据
    1. 被动断开连接
    2. 解析，执行
2. 发送数据 push
3. 断开连接
4. 管理命令集接口。即 enter_room

# 服务器 ChatServer
在线会话管理

会话对象目前在 ChatServer 和 Room 都会存储，是否会造成空间浪费？
python 语言的实现不会造成浪费

# Todo 扩展
1. 加入权限限制
